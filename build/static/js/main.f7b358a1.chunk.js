(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(42)},22:function(e,n,t){},23:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=(t(22),t(16)),i=t(3),l=(t(23),t(2)),s=t.n(l),f=t(4),m=t(5),d=t.n(m),h="http://localhost:3001/api/persons",p={getAll:function(){var e=Object(f.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.get(h),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(s.a.mark((function e(n){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.post(h,n),e.next=3,t;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(f.a)(s.a.mark((function e(n){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.delete("".concat(h,"/").concat(n)),e.next=3,t;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(f.a)(s.a.mark((function e(n,t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.put("".concat(h,"/").concat(n),t),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},b=function(e){return r.a.createElement("ul",null,e.persons.map((function(n){return r.a.createElement("div",{key:n.name},n.name," ",n.number,r.a.createElement("button",{onClick:function(){return e.deletePerson(n.id)}},"delete"))})))},v=function(e){return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:e.filteringString,onChange:e.handleFilter}))},w=function(e){return r.a.createElement("form",{onSubmit:e.addContact},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){return r.a.createElement("div",{className:"notification"},e.text)},E=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),s=l[0],f=l[1],m=Object(a.useState)(""),d=Object(i.a)(m,2),h=d[0],E=d[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),k=O[0],x=O[1],C=Object(a.useState)(""),y=Object(i.a)(C,2),N=y[0],S=y[1],A=function(e){x(e),setTimeout(x,3e3,"")};Object(a.useEffect)((function(){p.getAll().then((function(e){c(e)}))}),[]);var D=""===N?t:t.filter((function(e){return e.name.toLowerCase().includes(N)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),k.length>0&&r.a.createElement(g,{text:k}),r.a.createElement(v,{filteringString:N,handleFilter:function(e){S(e.target.value)}}),r.a.createElement(w,{handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){E(e.target.value)},newNumber:h,newName:s,addContact:function(e){e.preventDefault();var n={name:s,number:h};if(t.map((function(e){return e.name})).includes(n.name)){var a=t.find((function(e){return e.name===s})),r=Object(u.a)({},a,{number:h});window.confirm("".concat(s," is already added to the phonebook. Replace the old number with new one?"))&&p.update(a.id,r).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e})))})).catch((function(e){console.log("fail",e),alert("Something went wrong, try again later")}))}else p.create(n).then((function(e){c(t.concat(e)),A("Added ".concat(s," to the phonebook"))}));f(""),E("")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(b,{persons:D,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&p.remove(e).then((function(a){c(t.filter((function(n){return n.id!==e}))),A("Deleted ".concat(n.name))})).catch((function(){c(t.filter((function(n){return n.id!==e})))}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.f7b358a1.chunk.js.map